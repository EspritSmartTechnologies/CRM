@model IEnumerable<Domain.Entities.Claim>

@{
    ViewBag.Title = "IndexBack";
}

<h2>IndexBack</h2>

<p>
    @Html.ActionLink("Create New", "Create")
</p>

<table class="table">
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.Type)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.State)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Date)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Content)
        </th>
        <th></th>
    </tr>

    @foreach (var item in Model)
    {
        <tr>
            <td>
                @Html.DisplayFor(modelItem => item.Type)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.State)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Date)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Content)
            </td>
            <td>
                @*@Html.ActionLink("EditBack", "EditBack", new { id = item.IdClaim }) |*@
                @Html.ActionLink("DetailsBack", "DetailsBack", new { id = item.IdClaim }) |
                @Html.ActionLink("Delete", "Delete", new { id = item.IdClaim })
            </td>
        </tr>
    }

</table>

<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script type="text/javascript">
        google.charts.load("current", { packages: ["corechart"] });
        google.charts.setOnLoadCallback(drawChart);
        function drawChart() {
            var data = google.visualization.arrayToDataTable([
                ['Type', 'Nombre'],
                ['Technique', @Model.Where(w=>w.Type == Domain.Entities.Types.Technique).Count()],
                ['Financiere', @Model.Where(w=>w.Type == Domain.Entities.Types.Financière).Count()],
                ['Relationnelle', @Model.Where(w => w.Type == Domain.Entities.Types.Relationnelle).Count()],

            ]);

            var options = {
                title: 'Statistique Sur Les Types de Reclamation ',
                is3D: true,
            };

            var chart = new google.visualization.PieChart(document.getElementById('piechart_3d'));
            chart.draw(data, options);
        }
</script>
<div id="piechart_3d" style="width: 900px; height: 500px;"></div>
<script type="text/javascript">
        google.charts.load("current", { packages: ["corechart"] });
        google.charts.setOnLoadCallback(drawChart);
        function drawChart() {
            var data = google.visualization.arrayToDataTable([
                ['State', 'Nombre'],
                ['Ouverte', @Model.Where(w=>w.State == Domain.Entities.State.Ouverte).Count()],
                ['En Cours', @Model.Where(w=>w.State == Domain.Entities.State.EnCours).Count()],
                ['Fermée', @Model.Where(w => w.State == Domain.Entities.State.Fermée).Count()],

            ]);

            var options = {
                title: 'Statistique Sur Les états de Reclamation ',
                is3D: true,
            };

            var chart = new google.visualization.PieChart(document.getElementById('piechart_3d2'));
            chart.draw(data, options);
        }
</script>
<div id="piechart_3d2" style="width: 900px; height: 500px;"></div>