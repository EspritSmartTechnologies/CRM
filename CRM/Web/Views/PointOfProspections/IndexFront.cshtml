@model IEnumerable<Domain.Entities.PointOfProspection>

@{
    ViewBag.Title = "IndexFront";
    Layout = "~/Views/Shared/_LayoutFront.cshtml";
}

<h2>IndexFront</h2>

<p>
    @Html.ActionLink("Create New", "Create")
</p>
<table class="table">
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.Type)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.name)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.lat)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.lon)
        </th>
        <th></th>
    </tr>

    @foreach (var item in Model)
    {
        <tr>
            <td>
                @Html.DisplayFor(modelItem => item.Type)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.name)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.lat)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.lon)
            </td>
            <td>
                @Html.ActionLink("Edit", "Edit", new { id = item.IdPointOfProspection }) |
                @Html.ActionLink("Details", "Details", new { id = item.IdPointOfProspection }) |
                @Html.ActionLink("Delete", "Delete", new { id = item.IdPointOfProspection })
            </td>
        </tr>
    }



</table>
<center>
    <p id="demo" style="color:black">Click the button to get your position:</p>
    <button onclick="getLocation()" class="btn-rounded" style="background-color:mediumspringgreen">Get your Location</button>
</center>
<div id="mapholder"></div>
<script type="text/javascript">

    var x = document.getElementById("demo");
    function getLocation() {
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(showPosition, showError);
        }
        else { x.innerHTML = "Geolocation is not supported by this browser."; }
    }
    function showPosition(position) {
        var latlondata =  position.coords.latitude + "," +position.coords.longitude;
        var latlon = "Your Latitude Position is:=" + position.coords.latitude + "," + "Your Longitude Position is:="  +position.coords.longitude;
        alert(latlon)
        var mapProp= {
  center:new google.maps.LatLng(position.coords.latitude,position.coords.longitude),
  zoom:13,
        };

        var map = new google.maps.Map(document.getElementById("googleMap"), mapProp);
@foreach (var item in Model){

    <Text> var  @(item.name+item.IdPointOfProspection) = new google.maps.Marker({ position: new google.maps.LatLng(@item.lat, @item.lon), map: map, title: 'Hello World!' }); @(item.name+item.IdPointOfProspection).setMap(map); </Text>
}
}


    function showError(error) {
        if (error.code == 1) {
            x.innerHTML = "User denied the request for Geolocation."
        }
        else if (err.code == 2) {
            x.innerHTML = "Location information is unavailable."
        }
        else if (err.code == 3) {
            x.innerHTML = "The request to get user location timed out."
        }
        else {
            x.innerHTML = "An unknown error occurred."
        }
    }
</script>



<div id="googleMap" style="width:100%;height:400px;"></div>

<script>
    function myMap() {
        var mapProp = {
            center: new google.maps.LatLng(51.508742, -0.120850),
            zoom: 5,
        };
        var map = new google.maps.Map(document.getElementById("googleMap"), mapProp);
    }
</script>

<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA0-VR294o6_O4ASeWiKv76kBwDGPWGpbI&callback=myMap"></script>
